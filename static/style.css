:root {
  --bg: #0b1020;
  --card: #131a33;
  --muted: #8aa0ff;
  --accent: #5de2a5;
  --text: #e8ecff;
  --soft: #2a345f;
}
* { box-sizing: border-box; }
body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color: var(--text); background: linear-gradient(180deg, #0b1020, #0b1020 60%, #0e1530); }

/* Login */
.login-body { display:grid; place-items:center; height:100vh; }
.login-card { width: min(420px, 92vw); background: var(--card); padding: 2rem; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.4); }
.login-card h1 { margin-top:0; }
.login-card label { display:block; margin-top:1rem; color: #b9c4ff; font-size:.9rem; }
.login-card input { width:100%; background:#0f1633; color:var(--text); border:1px solid var(--soft); padding:.8rem; border-radius:10px; }
.login-card button { margin-top:1rem; width:100%; padding:.9rem; border:none; border-radius:12px; background: linear-gradient(90deg, #5661ff, #8b5cf6); color:white; font-weight:600; cursor:pointer; }
.hint { font-size:.85rem; margin-top:.75rem; color:#b9c4ff; }
.flash p.error { background:#2e1438; padding:.5rem .75rem; border-radius:8px; }

/* Generic page */
.page .topbar { display:flex; justify-content:space-between; align-items:center; padding:1rem 1.2rem; background: rgba(255,255,255,.03); border-bottom:1px solid rgba(255,255,255,.08); position: sticky; top:0; backdrop-filter: blur(8px); }
.page .container { width:min(1100px, 92vw); margin: 1.5rem auto; }
.card-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap:1rem; }
.card { display:grid; place-items:center; height:120px; background: var(--card); border:1px solid var(--soft); border-radius:14px; text-decoration:none; color:var(--text); font-weight:600; }
.card:hover { border-color: var(--muted); }

.notice { background:#231b3b; border:1px dashed #5b5181; padding:1rem; border-radius:12px; margin-top:1rem; }

/* Dashboard */
.dashboard { display:grid; grid-template-columns: 1fr; gap:1rem; }
@media (min-width: 900px) {
  .dashboard { grid-template-columns: 1fr 1fr; }
}
.summary { background: var(--card); border:1px solid var(--soft); border-radius:16px; padding:1rem; }
.balance-card { background: #0e1738; border:1px solid var(--soft); border-radius:14px; padding:1rem; }
.balance-label { color:#b9c4ff; font-size:.9rem; }
.balance-amount { font-size:2rem; margin-top:.25rem; }
.actions { margin-top:1rem; display:flex; gap:.5rem; flex-wrap:wrap; }
.pill { background:#18204a; color:#d9deff; border:1px solid #2c3770; border-radius:999px; padding:.5rem 1rem; cursor:pointer; }
.transactions { background: var(--card); border:1px solid var(--soft); border-radius:16px; padding:1rem; grid-column: span 1; }
.transactions table { width:100%; border-collapse: collapse; }
.transactions th, .transactions td { padding:.6rem .5rem; border-bottom:1px solid #202a57; }
.transactions th { text-align:left; color:#b9c4ff; font-weight:500; }
.right { text-align:right; }

/* Chatbot */
#chat-fab { position: fixed; right: 20px; bottom: 20px; width:56px; height:56px; border-radius:50%; border:none; font-size:24px; cursor:pointer;
  background: linear-gradient(135deg, #5de2a5, #6ea8ff); box-shadow: 0 8px 28px rgba(0,0,0,.4); }
#chat-panel { position: fixed; right: 20px; bottom: 86px; width: min(360px, 92vw); height: 460px; background: #0f1633; border: 1px solid #2b3568; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,.5); display:flex; flex-direction:column; }
#chat-panel.hidden { display:none; }
.chat-header { display:flex; justify-content:space-between; align-items:center; padding:.7rem .8rem; background:#131a33; border-bottom:1px solid #2b3568; border-top-left-radius:16px; border-top-right-radius:16px; }
#chat-log { flex:1; overflow:auto; padding:.6rem; display:flex; flex-direction:column; gap:.5rem; }
.msg { max-width:85%; padding:.55rem .7rem; border-radius:12px; }
.me { align-self:flex-end; background:#23306b; }
.bot { align-self:flex-start; background:#1a234e; }
.chat-input { display:flex; gap:.4rem; padding:.6rem; border-top:1px solid #2b3568; }
.chat-input input { flex:1; padding:.55rem .7rem; border-radius:10px; border:1px solid #2b3568; background:#0f1633; color:#e8ecff; }
.chat-input button { padding:.55rem .9rem; border:none; border-radius:10px; background:#5661ff; color:white; font-weight:600; cursor:pointer; }
/* Safety fallback for any hidden widgets */
.hidden { display: none !important; }
/* --- Chat widget safety overrides --- */
.hidden { display: none !important; }

/* Make sure the chat is above everything */
#chat-fab   { z-index: 9999 !important; }
#chat-panel { z-index: 9998 !important; }

/* In case any parent has overflow hidden */
body, html { overflow: visible !important; }
.typing { opacity:.8; font-style:italic; }
/* Chat polish */
#chat-fab {
  position: fixed; right: 22px; bottom: 22px;
  width: 54px; height: 54px; border-radius: 50%;
  background: linear-gradient(135deg,#5cc6ff,#6b8cff);
  display:grid; place-items:center; font-size:22px; color:#0b1025;
  border:none; box-shadow: 0 10px 24px rgba(0,0,0,.25); cursor:pointer;
}
#chat-panel {
  position: fixed; right: 22px; bottom: 88px; width: 380px; max-width: 92vw; height: 360px;
  background: #0f1633; color: #e6ebff; border:1px solid #273368; border-radius: 14px;
  display:flex; flex-direction: column; overflow:hidden;
  box-shadow: 0 14px 36px rgba(0,0,0,.35);
}
#chat-panel .chat-header { display:flex; align-items:center; justify-content:space-between;
  padding: 8px 10px; background:#121a3a; border-bottom:1px solid #273368; font-weight:700; }
#chat-close { background:#1e2754; color:#d7dcff; border:1px solid #2a3570; padding: 2px 6px; border-radius:6px; cursor:pointer; }
#chat-log { flex: 1; overflow-y:auto; padding:10px; display:flex; flex-direction:column; gap:8px; }
.msg { max-width:75%; padding:10px 12px; border-radius:12px; }
.msg.bot { align-self:flex-start; background:#1a2147; }
.msg.me  { align-self:flex-end; background:#2b356e; }
.msg.typing { opacity:.8; font-style:italic; }
.chat-input { display:flex; gap:6px; padding:8px; background:#121a3a; border-top:1px solid #273368; }
#chat-text { flex:1; padding:8px 10px; background:#0f1633; color:#e6ebff; border:1px solid #273368; border-radius:8px; }
#chat-send { padding:8px 12px; border:none; border-radius:8px; background:#5863ff; color:white; font-weight:700; cursor:pointer; }

.hidden { display: none !important; }
#chat-fab   { z-index: 9999 !important; }
#chat-panel { z-index: 9998 !important; }

/* subtle highlights when bot triggers actions */
.pulse { animation: pulse .35s ease 1; }
@keyframes pulse { 0%{transform:scale(1)} 50%{transform:scale(1.05)} 100%{transform:scale(1)} }
.flash { animation: flash .4s ease 1; }
@keyframes flash { from{background:rgba(86,97,255,.14)} to{background:transparent} }
